:original_name: ddm_06_0002.html

.. _ddm_06_0002:

Step 1: Create a DDM Instance and an RDS for MySQL Instance
===========================================================

Procedure
---------

#. Log in to the management console.

#. Click |image1| in the upper left corner and select the required region.

#. Click **Service List** and choose **Databases** > **Distributed Database Middleware**.

#. On the **Instances** page, in the upper right corner, click **Create** **DDM Instance**.

#. On the displayed page, configure the required parameters.

   .. table:: **Table 1** Parameter description

      +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter                         | Description                                                                                                                                                                                                                                                                   |
      +===================================+===============================================================================================================================================================================================================================================================================+
      | Region                            | Region where the DDM instance is located. Select the required region.                                                                                                                                                                                                         |
      +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | AZ                                | Availability zone where the DDM instance is deployed.                                                                                                                                                                                                                         |
      |                                   |                                                                                                                                                                                                                                                                               |
      |                                   | Nodes in a DDM instance can be deployed on different physical servers in the same AZ to keep services always available even if one physical server becomes faulty.                                                                                                            |
      |                                   |                                                                                                                                                                                                                                                                               |
      |                                   | A DDM instance can be deployed across AZs to provide cross-AZ DR.                                                                                                                                                                                                             |
      |                                   |                                                                                                                                                                                                                                                                               |
      |                                   | If necessary, you can select multiple AZs when you create a DDM instance. Then nodes of the instance will be deployed in multiple different AZs.                                                                                                                              |
      |                                   |                                                                                                                                                                                                                                                                               |
      |                                   | .. note::                                                                                                                                                                                                                                                                     |
      |                                   |                                                                                                                                                                                                                                                                               |
      |                                   |    Deploy your application, DDM instance, and required RDS instances in the same AZ to reduce network latency. Cross-AZ deployment may increase network latency.                                                                                                              |
      +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Instance Name                     | Name of the DDM instance, which:                                                                                                                                                                                                                                              |
      |                                   |                                                                                                                                                                                                                                                                               |
      |                                   | -  Cannot be left blank.                                                                                                                                                                                                                                                      |
      |                                   | -  Must start with a letter.                                                                                                                                                                                                                                                  |
      |                                   | -  Must be 4 to 64 characters long.                                                                                                                                                                                                                                           |
      |                                   | -  Can contain only letters, digits, and hyphens (-).                                                                                                                                                                                                                         |
      +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Node Class                        | Class of the DDM instance node. You can select **General-enhanced** or **Kunpeng general computing-plus** and then specify a node class.                                                                                                                                      |
      |                                   |                                                                                                                                                                                                                                                                               |
      |                                   | .. note::                                                                                                                                                                                                                                                                     |
      |                                   |                                                                                                                                                                                                                                                                               |
      |                                   |    Estimate compute and storage requirements of your applications based on your service type and scale before you create a DDM instance, and then select an appropriate node class so that the CPU and memory specifications of your DDM instance can better meet your needs. |
      +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Instance Nodes                    | Number of nodes in a DDM instance. Up to 32 nodes are supported.                                                                                                                                                                                                              |
      |                                   |                                                                                                                                                                                                                                                                               |
      |                                   | .. note::                                                                                                                                                                                                                                                                     |
      |                                   |                                                                                                                                                                                                                                                                               |
      |                                   |    At least 2 nodes are recommended because using a single node cannot guarantee high availability.                                                                                                                                                                           |
      +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | VPC                               | VPC that the DDM instance belongs to. This VPC isolates networks for different services. It allows you to manage and configure private networks, simplifying network management.                                                                                              |
      |                                   |                                                                                                                                                                                                                                                                               |
      |                                   | Click **View VPC** to show more details and security group rules.                                                                                                                                                                                                             |
      |                                   |                                                                                                                                                                                                                                                                               |
      |                                   | .. note::                                                                                                                                                                                                                                                                     |
      |                                   |                                                                                                                                                                                                                                                                               |
      |                                   |    The DDM instance should be in the same VPC as the required RDS for MySQL instance.                                                                                                                                                                                         |
      |                                   |                                                                                                                                                                                                                                                                               |
      |                                   |    To ensure network connectivity, the DDM instance you purchased must be in the same VPC as your applications and RDS for MySQL instances.                                                                                                                                   |
      +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Subnet                            | Name and IP address range of the subnet                                                                                                                                                                                                                                       |
      +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Security Group                    | Select an existing security group.                                                                                                                                                                                                                                            |
      |                                   |                                                                                                                                                                                                                                                                               |
      |                                   | You are advised to select the same security group for your DDM instance, application, and RDS for MySQL instances so that they can communicate with each other. If different security groups are selected, add security group rules to enable network access.                 |
      +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Parameter Template                | Select an existing parameter template. You can also click **View Parameter Template** to set parameters on the displayed page.                                                                                                                                                |
      +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
      | Tags                              | (Optional) Adding tags helps you better identify and manage your DDM resources.                                                                                                                                                                                               |
      |                                   |                                                                                                                                                                                                                                                                               |
      |                                   | You can add tags to your instance. Each instance can have a maximum of 20 tags.                                                                                                                                                                                               |
      |                                   |                                                                                                                                                                                                                                                                               |
      |                                   | **Tag key: This parameter is mandatory and cannot be null.**                                                                                                                                                                                                                  |
      |                                   |                                                                                                                                                                                                                                                                               |
      |                                   | -  Must be unique for each instance.                                                                                                                                                                                                                                          |
      |                                   | -  Can only consist of digits, letters, underscores (_), hyphens (-), and at sign (@).                                                                                                                                                                                        |
      |                                   | -  Can include 1 to 36 characters.                                                                                                                                                                                                                                            |
      |                                   | -  Cannot be an empty string or start with **\_sys\_**.                                                                                                                                                                                                                       |
      |                                   |                                                                                                                                                                                                                                                                               |
      |                                   | **Tag value: This parameter is mandatory.**                                                                                                                                                                                                                                   |
      |                                   |                                                                                                                                                                                                                                                                               |
      |                                   | -  Is an empty string by default.                                                                                                                                                                                                                                             |
      |                                   | -  Can only consist of digits, letters, underscores (_), hyphens (-), and at sign (@).                                                                                                                                                                                        |
      |                                   | -  Can contain 0 to 43 characters.                                                                                                                                                                                                                                            |
      +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

#. After the configuration is complete, click **Next** at the bottom of the page.

#. Confirm the configurations and click **Submit**.

#. To view and manage the instance, go to the **Instances** page.

   The default database port is **5066** and can be changed after a DDM instance is created.

   For details, see :ref:`Changing a Database Port <ddm_06_0036>`.

#. Switch to the RDS console, click **Create** **DB Instance** in the upper right corner, specify the required information, and click **Next**.

   For details about how to create an RDS for MySQL instance, see `Create a DB Instance <https://docs.otc.t-systems.com/en-us/usermanual/rds/rds_02_0008.html>`__.

   .. caution::

      The RDS for MySQL instance must be in the same VPC and subnet as your DDM instance. If they are not in the same subnet, configure routes to ensure network connectivity.

#. After confirming the settings, click **Submit**. Wait 1 to 3 minutes till the instance is created.

.. |image1| image:: /_static/images/en-us_image_0000001685147682.png
