:original_name: ddm_api_01_0019.html

.. _ddm_api_01_0019:

Querying Details of a DDM Instance
==================================

Function
--------

This API is used to query details about a DDM instance.

Constraints
-----------

None

URI
---

GET /v1/{project_id}/instances/{instance_id}

.. table:: **Table 1** Path parameters

   =========== ========= ====== ==================================
   Parameter   Mandatory Type   Description
   =========== ========= ====== ==================================
   project_id  Yes       String Project ID of a tenant in a region
   instance_id Yes       String DDM instance ID
   =========== ========= ====== ==================================

Request Parameters
------------------

.. table:: **Table 2** Request header parameters

   +-----------------+-----------------+-----------------+----------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                                                                                          |
   +=================+=================+=================+======================================================================================================================+
   | X-Auth-Token    | Yes             | String          | User token.                                                                                                          |
   |                 |                 |                 |                                                                                                                      |
   |                 |                 |                 | It can be obtained by calling an IAM API. The value of **X-Subject-Token** in the response header is the user token. |
   +-----------------+-----------------+-----------------+----------------------------------------------------------------------------------------------------------------------+

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 3** Response body parameters

   +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                                                                                        | Description                                                                                                   |
   +=======================+=============================================================================================+===============================================================================================================+
   | id                    | String                                                                                      | DDM instance ID                                                                                               |
   +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------+
   | status                | String                                                                                      | DDM instance status. For details about this parameter value, see :ref:`Status Description <ddm_api_01_0064>`. |
   +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------+
   | name                  | String                                                                                      | DDM instance name                                                                                             |
   +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------+
   | created               | String                                                                                      | Time when the DDM instance is created                                                                         |
   +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------+
   | updated               | String                                                                                      | Time when the DDM instance is last updated                                                                    |
   +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------+
   | available_zone        | String                                                                                      | Name of the AZ where the DDM instance is located                                                              |
   +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------+
   | vpc_id                | String                                                                                      | VPC ID                                                                                                        |
   +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------+
   | subnet_id             | String                                                                                      | Subnet ID                                                                                                     |
   +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------+
   | security_group_id     | String                                                                                      | Security group ID                                                                                             |
   +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------+
   | node_count            | Integer                                                                                     | Number of nodes                                                                                               |
   +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------+
   | access_ip             | String                                                                                      | Address for accessing the DDM instance                                                                        |
   +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------+
   | access_port           | String                                                                                      | Port for accessing the DDM instance                                                                           |
   +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------+
   | node_status           | String                                                                                      | Node status For details, see :ref:`Status Description <ddm_api_01_0064>`.                                     |
   +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------+
   | core_count            | String                                                                                      | Number of CPUs                                                                                                |
   +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------+
   | ram_capacity          | String                                                                                      | Memory size in GB                                                                                             |
   +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------+
   | error_msg             | String                                                                                      | Response message. This parameter is not returned if no abnormality occurs.                                    |
   +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------+
   | project_id            | String                                                                                      | Project ID                                                                                                    |
   +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------+
   | order_id              | String                                                                                      | The function has not been supported, and this field is reserved.                                              |
   +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------+
   | engine_version        | String                                                                                      | Engine version (core instance version)                                                                        |
   +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------+
   | nodes                 | Array of :ref:`GetDetailfNodesInfo <ddm_api_01_0019__response_getdetailfnodesinfo>` objects | Node information                                                                                              |
   +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------+
   | admin_user_name       | String                                                                                      | Username of the administrator. The username:                                                                  |
   |                       |                                                                                             |                                                                                                               |
   |                       |                                                                                             | -  Can include 1 to 32 characters.                                                                            |
   |                       |                                                                                             | -  Must start with a letter.                                                                                  |
   |                       |                                                                                             | -  Can contain only letters, digits, and underscores (_).                                                     |
   +-----------------------+---------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------+

.. _ddm_api_01_0019__response_getdetailfnodesinfo:

.. table:: **Table 4** GetDetailfNodesInfo

   +-----------+--------+-----------------------------------------------------------------------------------------------+
   | Parameter | Type   | Description                                                                                   |
   +===========+========+===============================================================================================+
   | status    | String | Status of the DDM instance node For details, see :ref:`Status Description <ddm_api_01_0064>`. |
   +-----------+--------+-----------------------------------------------------------------------------------------------+
   | port      | String | Port of the DDM instance node                                                                 |
   +-----------+--------+-----------------------------------------------------------------------------------------------+
   | ip        | String | IP address of the DDM instance node                                                           |
   +-----------+--------+-----------------------------------------------------------------------------------------------+

**Status code: 400**

.. table:: **Table 5** Response body parameters

   =============== ====== ==================
   Parameter       Type   Description
   =============== ====== ==================
   errCode         String Service error code
   externalMessage String Error message
   =============== ====== ==================

**Status code: 500**

.. table:: **Table 6** Response body parameters

   =============== ====== ==================
   Parameter       Type   Description
   =============== ====== ==================
   errCode         String Service error code
   externalMessage String Error message
   =============== ====== ==================

Example Request
---------------

.. code-block:: text

   GET https://{endpoint}/v1/{project_id}/instances/{instance_id}

Example Response
----------------

**Status code: 200**

OK

.. code-block::

   {
     "nodes" : [ {
       "status" : "RUNNING",
       "port" : "5066",
       "ip" : "192.168.0.160"
     } ],
     "id" : "1f5c9fd6cd984056ba89c8c87cc03278in09",
     "status" : "RUNNING",
     "name" : "ddm2-test",
     "created" : "2021-11-09T03:30:01+0000",
     "updated" : "2021-12-15T09:12:58+0000",
     "available_zone" : "az1",
     "vpc_id" : "cfaa4024-0603-4aba-81d4-2203b4ad26fb",
     "subnet_id" : "48f270ef-af70-4ad9-bb1c-c28dd5b37f93",
     "security_group_id" : "bc28ef93-0083-4652-bce6-381e14284db6",
     "node_count" : 1,
     "access_ip" : "192.168.0.160",
     "access_port" : "5066",
     "core_count" : "2",
     "ram_capacity" : "8",
     "node_status" : "RUNNING",

     "project_id" : "070c071d8e80d58c2f42c0121b10cf9f",
     "engine_version" : "3.0.6",
     "admin_user_name" : "root"
   }

**Status code: 400**

bad request

.. code-block::

   {
     "externalMessage" : "Parameter error.",
     "errCode" : "DBS.280001"
   }

**Status code: 500**

server error

.. code-block::

   {
     "externalMessage" : "Server failure.",
     "errCode" : "DBS.200412"
   }

Status Codes
------------

=========== ============
Status Code Description
=========== ============
200         OK
400         bad request
500         server error
=========== ============

Error Codes
-----------

For details, see :ref:`Error Codes <ddm_api_01_0061>`.
